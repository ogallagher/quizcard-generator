<div id="question-text">
  {{cloze:text}}
</div>
<div id="question-source">
  <span class="file-url">{{source-file}}</span>,
  line <span class="line-number">{{source-line}}</span>
</div>

<hr>
<!-- 
  choices are added to the document body as invisible, 
  one of which will be shown by the custom render script
-->
{{choices}}

<hr>
<!-- console for debugging -->
<div class="text-left">
  <details>
  <summary>card render logs</summary>
  <div id="console-out"></div>
  </details>
</div>

<script>
  (function() {
    // parse the cloze ordinal to select the corresponding choices
    let active_cloze = document.getElementsByClassName('cloze')[0]
    let active_cloze_idx = active_cloze.getAttribute('data-ordinal')
    let console_logs = []
    console_logs.push(`active cloze = ${active_cloze.outerHTML}`)
    console_logs.push(`active cloze index = ${active_cloze_idx}`)
	
    let active_choice = document.getElementsByClassName(`choice-${active_cloze_idx}`)[0]
    if (active_choice !== undefined) {
      active_choice.classList.add('active')
      console_logs.push(`active choice = ${active_choice.outerHTML}`)
    }
    else {
      document.getElementsByClassName('choices')[0].innerHTML = (
        `<div class="text-left">no choices for cloze ${active_cloze_idx}</div>`
      )
    }

    let console_out = document.getElementById('console-out')
    console_out.innerText = console_logs.join('\n')
  })()
</script>